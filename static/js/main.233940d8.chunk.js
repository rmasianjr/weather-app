(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,a){e.exports=a(51)},24:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(16),c=a.n(o),i=(a(24),a(17)),l=a(2),s=a(3),u=a(5),m=a(4),p=a(6),h=a(7),d=a.n(h);a(44);function f(e,t){var a,n,r=(a=t)<6||a>17?"night-alt":"day";switch(e){case"Clear":n="day"===r?"day-sunny":"night-clear";break;case"Clouds":n="".concat(r,"-cloudy");break;case"Rain":n="".concat(r,"-rain");break;case"Snow":n="".concat(r,"-snow");break;case"Drizzle":n="".concat(r,"-sprinkle");break;case"Thunderstorm":n="".concat(r,"-thunderstorm");break;case"Fog":n="".concat(r.replace(/-alt$/,""),"-fog");break;case"Haze":case"Mist":case"Dust":n="dust";break;case"Extreme":n="tornado";break;default:n="cloud"}return n}var g=function(e){var t=e.status,a=e.description,n=e.timeInHour;return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"icon-weather"},r.a.createElement("i",{className:"wi wi-".concat(f(t,n))})),r.a.createElement("p",{className:"icon-description"},a))},v=(a(45),function(e){var t=e.weatherData,a=e.temperature,n=e.unit,o=t.status,c=t.description,i=t.place,l=t.timeInHour;return r.a.createElement("div",{className:"weather-data"},r.a.createElement(g,{status:o,description:c,timeInHour:l}),r.a.createElement("div",{className:"search-icon"}),r.a.createElement("div",{className:"weather-marker"}),r.a.createElement("p",{className:"weather-data-place"},i),r.a.createElement("p",{className:"weather-data-temp"},a,"celsius"===n?"\xb0 C":"\xb0 F"))}),E=(a(46),function(e){var t=e.convertTo,a=e.unit;return r.a.createElement("div",{className:"con-ctrl"},r.a.createElement("input",{className:"con-ctrl-switch",type:"checkbox",id:"convert",onChange:t,checked:"fahrenheit"===a}),r.a.createElement("label",{className:"toggle-switch",htmlFor:"convert","data-temp-off":"Fahrenheit","data-temp-on":"Celsius"}))}),w=(a(47),function(){return r.a.createElement("div",{className:"spinner"})}),b=(a(48),function(e){var t=e.error,a=e.runFallback,n=e.runTryAgain,o=t.errorContent,c=t.type,i="warn"!==c?n:a,l={title:"Warning",description:r.a.createElement("p",null,"As a fallback, it will use the user ",r.a.createElement("strong",null,"IP Address")," to get the location and weather status."),style:"warn"},s={title:"Error",description:r.a.createElement("p",null,o.message),style:"danger"},u="warn"===c?l:s;return r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal-container modal-container-".concat(u.style)},r.a.createElement("header",{className:"modal-header modal-header-".concat(u.style)},r.a.createElement("h4",null,u.title,":"," ","warn"===c&&r.a.createElement("span",{className:"modal-header-message"},o.message))),r.a.createElement("div",{className:"modal-content modal-content-".concat(u.style)},u.description,"warn"===c&&r.a.createElement("span",null,"Note: it will give inaccurate result.")),r.a.createElement("button",{className:"modal-button modal-button-".concat(u.style),onClick:i},"warn"===c?"Ok":"Try Again")))}),y=(a(49),function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("p",null,"Created by:"," ",r.a.createElement("a",{href:"https://twitter.com/rmasianjr",target:"_blank",rel:"noopener noreferrer"},"Ricardo Masian Jr."),r.a.createElement("span",null,"\u2014"),r.a.createElement("a",{href:"https://github.com/rmasianjr/weather-app",target:"_blank",rel:"noopener noreferrer"},"View code")),r.a.createElement("p",null,r.a.createElement("span",null,"API:"," ",r.a.createElement("a",{href:"https://fcc-weather-api.glitch.me/",target:"_blank",rel:"noopener noreferrer"},"fcc-weather-api")," ","/"," ",r.a.createElement("a",{href:"https://ipapi.co/",target:"_blank",rel:"noopener noreferrer"},"ipapi")," ","/"," ",r.a.createElement("a",{href:"https://timezonedb.com/",target:"_blank",rel:"noopener noreferrer"},"timezonedb")," ","/"," ",r.a.createElement("a",{href:"https://developers.google.com/maps/documentation/javascript/places-autocomplete",target:"_blank",rel:"noopener noreferrer"},"googlemaps autocomplete"))),r.a.createElement("p",null,"Weather Icons:"," ",r.a.createElement("a",{href:"https://erikflowers.github.io/weather-icons/",target:"_blank",rel:"noopener noreferrer"},"erikflowers")))}),k=a(9),O=(a(50),{address:"",geo:null,error:null}),N=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state=Object(k.a)({},O),a.searchInput=r.a.createRef(),a.handleOnChange=function(e){var t=e.target.value;a.setState(function(){return{address:t,error:null}})},a.handlePlaceSelect=function(){var e=a.autocomplete.getPlace();if(e.geometry){var t={lat:e.geometry.location.lat(),lon:e.geometry.location.lng()};a.setState(function(){return{address:e.formatted_address,geo:t}}),a.submitQuery()}else{var n=new Error('No details available for input "'.concat(e.name,'"'));a.setState(function(){return{error:n}})}},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.autocomplete=new google.maps.places.Autocomplete(this.searchInput.current),this.autocomplete.setFields(["formatted_address","geometry"]),this.autocomplete.addListener("place_changed",this.handlePlaceSelect)}},{key:"submitQuery",value:function(){var e=this.state,t=e.geo,a=e.address;this.props.getLocationWeather(t.lat,t.lon,a),this.setState(function(){return Object(k.a)({},O)})}},{key:"render",value:function(){var e=this.state,t=e.address,a=e.error;return r.a.createElement("div",{className:"search-container"},r.a.createElement("div",{className:"search-icon"}),r.a.createElement("input",{className:"search-input",type:"search",q:"locationsearch",ref:this.searchInput,placeholder:"Enter a Location",onChange:this.handleOnChange,value:t}),a&&r.a.createElement("span",null,a.message))}}]),t}(n.Component),F=function(e){return(1.8*parseFloat(e)+32).toFixed(1)},j=function(e){return((parseFloat(e)-32)*(5/9)).toFixed(1)};var C=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={weatherData:null,temperature:null,unit:null,error:null,isOpen:!1,isFetching:!0},a.checkGeolocation=function(){if("geolocation"in navigator)new Promise(function(e,t){navigator.geolocation.getCurrentPosition(function(t){return e(function(e){return{latitude:e.coords.latitude,longitude:e.coords.longitude}}(t))},function(e){return t(function(e){return e}(e))})}).then(function(e){return a.getLocationWeather(e.latitude,e.longitude)}).catch(function(e){var t=1===e.code?"warn":"fetch";a.setState(function(a){return{error:{errorContent:e,type:t},isOpen:!a.isOpen}})});else{var e=new Error("Geolocation is not supported by this browser");a.setState(function(t){return{error:{errorContent:e,type:"warn"},isOpen:!t.isOpen}})}},a.getLocationByIP=function(){d.a.get("https://ipapi.co/json/").then(function(e){var t=e.data,n=t.latitude,r=t.longitude;a.getLocationWeather(n,r)}).catch(function(e){a.setState(function(t){return{error:{errorContent:e,type:"fetch"},isOpen:!t.isOpen}})})},a.getLocationWeather=function(e,t,n){var r="https://fcc-weather-api.glitch.me/api/current?lat=".concat(e,"&lon=").concat(t),o="https://api.timezonedb.com/v2.1/get-time-zone?key=".concat("DEMNE7IIP1F0","&format=json&by=position&lat=").concat(e,"&lng=").concat(t),c=d.a.get(r).then(function(e){return e.data}),i=d.a.get(o).then(function(e){return e.data});a.setState(function(){return{isFetching:!0}}),Promise.all([c,i]).then(function(e){return a.setData(e,n)}).catch(function(e){a.setState(function(t){return{error:{errorContent:e,type:"fetch"},isOpen:!t.isOpen}})})},a.convertTo=function(e){e.target.checked?a.setState(function(e){return{temperature:F(e.temperature),unit:"fahrenheit"}}):a.setState(function(e){return{temperature:j(e.temperature),unit:"celsius"}})},a.runTryAgain=function(){a.setState(function(e){return{error:null,isOpen:!e.isOpen}}),a.checkGeolocation()},a.runFallBack=function(){a.setState(function(e){return{error:null,isOpen:!e.isOpen}}),a.getLocationByIP()},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.checkGeolocation()}},{key:"setData",value:function(e,t){var a,n,r=Object(i.a)(e,2),o=r[0],c=r[1],l=o.main,s=o.name,u=o.sys,m=o.weather,p=c.formatted,h=c.countryName;/united states|bahamas|belize|cayman islands|palau|puerto rico|guam|u.s. virgin islands/i.test(h)?(a="fahrenheit",n=F(l.temp.toFixed(1))):(a="celsius",n=l.temp.toFixed(1));var d={status:m[0].main,description:m[0].description,place:t||"".concat(s,", ").concat(u.country),timeInHour:parseInt(p.split(" ")[1].split(":")[0])};this.setState(function(e){return{weatherData:d,temperature:n,unit:a,isFetching:!e.isFetching}})}},{key:"render",value:function(){var e=this.state,t=e.weatherData,a=e.temperature,n=e.unit,o=e.isOpen,c=e.error,i=e.isFetching;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"app"},r.a.createElement("h1",null,"Weather App"),r.a.createElement("div",{className:"app-content"},r.a.createElement(N,{getLocationWeather:this.getLocationWeather}),c?r.a.createElement(b,{error:c,isOpen:o,runFallback:this.runFallBack,runTryAgain:this.runTryAgain}):i?r.a.createElement(w,null):r.a.createElement("div",null,r.a.createElement(v,{weatherData:t,temperature:a,unit:n}),r.a.createElement(E,{convertTo:this.convertTo,unit:n}))),r.a.createElement(y,null)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[18,1,2]]]);
//# sourceMappingURL=main.233940d8.chunk.js.map